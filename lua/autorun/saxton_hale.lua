player_manager.AddValidModel( "!tf_saxton",			"models/player/saxton_hale.mdl" )
player_manager.AddValidHands( "!tf_saxton",			"models/weapons/c_models/c_saxton_arms.mdl",			0, "0000000" )

player_manager.AddValidModel( "!tf_santa_saxton",			"models/vsh/player/santa_hale.mdl" )
player_manager.AddValidHands( "!tf_santa_saxton",			"models/weapons/c_models/c_saxton_arms.mdl",			0, "0000000" )

list.Set( "PlayerOptionsAnimations", "!tf_NEW_saxton", { "layer_taunt_flip_success_initiator", "layer_taunt_knuckles", "taunt_russian", "layer_taunt_laugh", "taunt_flip_start", "layer_taunt07_halloween", "taunt06", "taunt_aerobic_a", "taunt_aerobic_b", "layer_taunt_headbutt_success", "stand_melee", "layer_vsh_dash_attack_end_veritcalblend", "layer_vsh_attack_slamdown_end", "layer_taunt_rps_rock_win", "layer_taunt_dosido_dance" } )
list.Set( "PlayerOptionsAnimations", "!tf_saxton", { "layer_taunt_flip_success_initiator", "layer_taunt_knuckles", "taunt_russian", "layer_taunt_laugh", "taunt_flip_start", "layer_taunt07_halloween", "taunt06", "taunt_aerobic_a", "taunt_aerobic_b", "layer_taunt_headbutt_success", "stand_melee", "layer_vsh_dash_attack_end_veritcalblend", "layer_vsh_attack_slamdown_end", "layer_taunt_rps_rock_win", "layer_taunt_dosido_dance" } )
list.Set( "PlayerOptionsAnimations", "!tf_santa_saxton", { "layer_taunt_flip_success_initiator", "layer_taunt_knuckles", "taunt_russian", "layer_taunt_laugh", "taunt_flip_start", "layer_taunt07_halloween", "taunt06", "taunt_aerobic_a", "taunt_aerobic_b", "layer_taunt_headbutt_success", "stand_melee", "layer_vsh_dash_attack_end_veritcalblend", "layer_vsh_attack_slamdown_end", "layer_taunt_rps_rock_win", "layer_taunt_dosido_dance" } )
list.Set( "PlayerOptionsAnimations", "!tf_hell_saxton", { "layer_taunt_flip_success_initiator", "layer_taunt_knuckles", "taunt_russian", "layer_taunt_laugh", "taunt_flip_start", "layer_taunt07_halloween", "taunt06", "taunt_aerobic_a", "taunt_aerobic_b", "layer_taunt_headbutt_success", "stand_melee", "layer_vsh_dash_attack_end_veritcalblend", "layer_vsh_attack_slamdown_end", "layer_taunt_rps_rock_win", "layer_taunt_dosido_dance" } )
list.Set( "PlayerOptionsAnimations", "!tf_winter_saxton", { "layer_taunt_flip_success_initiator", "layer_taunt_knuckles", "taunt_russian", "layer_taunt_laugh", "taunt_flip_start", "layer_taunt07_halloween", "taunt06", "taunt_aerobic_a", "taunt_aerobic_b", "layer_taunt_headbutt_success", "stand_melee", "layer_vsh_dash_attack_end_veritcalblend", "layer_vsh_attack_slamdown_end", "layer_taunt_rps_rock_win", "layer_taunt_dosido_dance" } )
list.Set( "PlayerOptionsAnimations", "!tf_MECHA_saxton", { "layer_taunt_flip_success_initiator", "layer_taunt_knuckles", "taunt_russian", "layer_taunt_laugh", "taunt_flip_start", "layer_taunt07_halloween", "taunt06", "taunt_aerobic_a", "taunt_aerobic_b", "layer_taunt_headbutt_success", "stand_melee", "layer_vsh_dash_attack_end_veritcalblend", "layer_vsh_attack_slamdown_end", "layer_taunt_rps_rock_win", "layer_taunt_dosido_dance" } )

player_manager.AddValidModel( "!tf_NEW_saxton",			"models/vsh/player/saxton_hale.mdl" )
player_manager.AddValidHands( "!tf_NEW_saxton",			"models/vsh/weapons/c_models/c_saxton_hale_arms.mdl",			0, "0000000" )

player_manager.AddValidModel("!tf_winter_saxton", "models/vsh/player/winter/saxton_hale.mdl")
player_manager.AddValidModel("!tf_hell_saxton", "models/vsh/player/hell_hale.mdl")

player_manager.AddValidHands("!tf_winter_saxton", "models/vsh/weapons/c_models/winter/c_saxton_arms.mdl", 0, "0000000")
player_manager.AddValidHands("!tf_hell_saxton", "models/vsh/weapons/c_models/c_hell_hale_arms.mdl", 0, "0000000")


player_manager.AddValidModel( "!tf_MECHA_saxton",			"models/vsh/player/mecha_hale.mdl" )
player_manager.AddValidHands( "!tf_MECHA_saxton",			"models/vsh/weapons/c_models/c_mecha_hale_arms.mdl",			0, "0000000" )

player_manager.AddValidModel( "!tf_VIP",			"models/vip/player/julius/julius.mdl" )
player_manager.AddValidHands( "!tf_VIP",			"models/vip/weapons/c_models/c_julius_arms.mdl",			0, "0000000" ) 

player_manager.AddValidModel( "!tf_hatman",			"models/bots/headless_hatman.mdl" )
player_manager.AddValidHands( "!tf_hatman",			"models/weapons/c_models/c_demo_arms.mdl",			0, "0000000" )

player_manager.AddValidModel( "!tf_old_saxton",			"models/saxton_hale_3.mdl" )
player_manager.AddValidHands( "!tf_old_saxton",			"models/weapons/c_models/c_saxton_arms.mdl",			0, "0000000" )

list.Set( "PlayerOptionsAnimations", "!tf_VIP", { "taunt_replay", "crouch_melee", "taunt_russian", "taunt_highfivesuccessfull", "layer_taunt_rps_scissors_lose", "taunt_conga", "taunt03", "taunt_aerobic_a", "taunt_aerobic_b", "taunt_highfivesuccess", "stand_melee", "ragdollspawn", "stand_loser", "layer_taunt_rps_rock_win", "layer_taunt_rps_paper_lose", "layer_taunt_rps_rock_lose", "layer_taunt_rps_scissors_win", "layer_taunt_rps_paper_win", "layer_taunt_rps_rock_win" } )

list.Set( "PlayerOptionsAnimations", "!tf_old_saxton", { "selectionmenu_idle", "selectionmenu_anim01", "selectionmenu_startpose", "taunt_highfivesuccessfull", "taunt02", "taunt_laugh", "taunt_yeti", "taunt_headbutt_success", "taunt_aerobic_b", "taunt_coffee", "stand_melee", "ragdollspawn", "stand_loser", "primary_death_headshot", "primary_death_backstab", "aimup", "crouch_melee", "taunt_flip_success_receiver", "taunt_flip_success_initiator" } )

list.Set( "PlayerOptionsAnimations", "!tf_hatman", { "layer_taunt04", "stand_item1", "shake", "spawn", "ragdollspawn", "layer_taunt09", "crouch_item1", "taunt06" } )

player_manager.AddValidModel( "!tf_subzero_saxton",			"models/subzero_saxton_hale.mdl" )
player_manager.AddValidHands( "!tf_subzero_saxton",			"models/vsh/weapons/c_models/winter/c_saxton_arms.mdl",			0, "0000000" )

list.Set( "PlayerOptionsAnimations", "!tf_subzero_saxton", { "layer_taunt_flip_success_initiator", "layer_taunt_knuckles", "taunt_russian", "layer_taunt_laugh", "taunt_flip_start", "layer_taunt07_halloween", "taunt06", "taunt_aerobic_a", "taunt_aerobic_b", "layer_taunt_headbutt_success", "stand_melee", "layer_vsh_dash_attack_end_veritcalblend", "layer_vsh_attack_slamdown_end", "layer_taunt_rps_rock_win", "layer_taunt_dosido_dance" } )


--SAXTON HAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLE






--code to make saxton and vip and hatman not be a solid statue

local ActivityTranslateFixTF2 = {}

hook.Add("TranslateActivity", "CustomAnimations", function(pl, act)
    if not IsValid(pl) then return end

    local weapon = pl:GetActiveWeapon()
    if not IsValid(weapon) then return end

    local holdtype = weapon:GetHoldType()

    -- Saxton Hale and vip models
    if pl:GetModel() == "models/player/saxton_hale.mdl" or 
       pl:GetModel() == "models/vsh/player/santa_hale.mdl" or 
       pl:GetModel() == "models/vsh/player/saxton_hale.mdl" or 
       pl:GetModel() == "models/saxton_hale_3.mdl" or 
       pl:GetModel() == "models/bots/headless_hatman.mdl" or 
       pl:GetModel() == "models/vsh/player/winter/saxton_hale.mdl" or 
       pl:GetModel() == "models/player/saxton_hale.mdl" or 
       pl:GetModel() == "models/vip/player/julius/julius.mdl" or 
       pl:GetModel() == "models/vsh/player/mecha_hale.mdl" or 
       pl:GetModel() == "models/subzero_saxton_hale.mdl" or 
       pl:GetModel() == "models/vsh/player/hell_hale.mdl" then

        -- Handle the holdtype and specific animation behavior
        if holdtype == "normal" or holdtype == "passive" then
            -- Play loser animations for "normal" or "passive" holdtypes
            ActivityTranslateFixTF2[ACT_MP_STAND_IDLE] = pl:GetSequenceActivity(pl:LookupSequence("stand_LOSER"))
            ActivityTranslateFixTF2[ACT_MP_RUN] = pl:GetSequenceActivity(pl:LookupSequence("run_LOSER"))
            ActivityTranslateFixTF2[ACT_MP_WALK] = pl:GetSequenceActivity(pl:LookupSequence("run_LOSER"))
            ActivityTranslateFixTF2[ACT_MP_SWIM] = pl:GetSequenceActivity(pl:LookupSequence("swim_loser"))
            ActivityTranslateFixTF2[ACT_MP_AIRWALK] = pl:GetSequenceActivity(pl:LookupSequence("airwalk_LOSER"))
            ActivityTranslateFixTF2[ACT_MP_CROUCH_IDLE] = pl:GetSequenceActivity(pl:LookupSequence("crouch_LOSER"))
            ActivityTranslateFixTF2[ACT_MP_CROUCHWALK] = pl:GetSequenceActivity(pl:LookupSequence("crouch_walk_melee"))
        elseif
            holdtype == "ar2" or holdtype == "camera" or holdtype == "crossbow" or holdtype == "dual" or
            holdtype == "duel" or holdtype == "fist" or holdtype == "flamethrower" or holdtype == "grenade" or
            holdtype == "knife" or holdtype == "melee" or
            holdtype == "physgun" or holdtype == "pistol" or holdtype == "revolver" or holdtype == "rpg" or
            holdtype == "shotgun" or holdtype == "slam" or holdtype == "smg" then
            -- For these melee-related holdtypes, keep the original melee animations
            ActivityTranslateFixTF2[ACT_MP_STAND_IDLE] = pl:GetSequenceActivity(pl:LookupSequence("stand_melee"))
            ActivityTranslateFixTF2[ACT_MP_RUN] = ACT_MP_RUN_MELEE
            ActivityTranslateFixTF2[ACT_MP_WALK] = ACT_MP_RUN_MELEE
            ActivityTranslateFixTF2[ACT_MP_AIRWALK] = pl:GetSequenceActivity(pl:LookupSequence("airwalk_melee"))
            ActivityTranslateFixTF2[ACT_MP_CROUCH_IDLE] = ACT_MP_CROUCH_MELEE
            ActivityTranslateFixTF2[ACT_MP_CROUCHWALK] = ACT_MP_CROUCHWALK_MELEE
			elseif holdtype == "magic" then
			ActivityTranslateFixTF2[ACT_MP_STAND_IDLE] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup"))
			ActivityTranslateFixTF2[ACT_MP_RUN] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_walk"))
			ActivityTranslateFixTF2[ACT_MP_WALK] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_walk"))
			ActivityTranslateFixTF2[ACT_MP_JUMP] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_air"))
			ActivityTranslateFixTF2[ACT_MP_JUMP_FLOAT] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_air"))
			ActivityTranslateFixTF2[ACT_MP_SWIM] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_airwalk"))
			ActivityTranslateFixTF2[ACT_MP_CROUCHWALK] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_walk_crouchfix"))
			ActivityTranslateFixTF2[ACT_MP_CROUCH_IDLE] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_crouchfix"))
            ActivityTranslateFixTF2[ACT_MP_AIRWALK] = pl:GetSequenceActivity(pl:LookupSequence("vsh_dash_chargeup_airwalk"))
			elseif holdtype == "melee2" then
			ActivityTranslateFixTF2[ACT_MP_STAND_IDLE] = pl:GetSequenceActivity(pl:LookupSequence("stand_item1"))
			ActivityTranslateFixTF2[ACT_MP_RUN] = pl:GetSequenceActivity(pl:LookupSequence("run_item1"))
			ActivityTranslateFixTF2[ACT_MP_WALK] = pl:GetSequenceActivity(pl:LookupSequence("run_item1"))
			ActivityTranslateFixTF2[ACT_MP_JUMP] = pl:GetSequenceActivity(pl:LookupSequence("a_jumpstart_item1"))
			ActivityTranslateFixTF2[ACT_MP_JUMP_FLOAT] = pl:GetSequenceActivity(pl:LookupSequence("a_jumpfloat_item1"))
			ActivityTranslateFixTF2[ACT_MP_SWIM] = pl:GetSequenceActivity(pl:LookupSequence("airwalk_item1"))
			ActivityTranslateFixTF2[ACT_MP_CROUCHWALK] = pl:GetSequenceActivity(pl:LookupSequence("crouch_walk_item1"))
			ActivityTranslateFixTF2[ACT_MP_CROUCH_IDLE] = pl:GetSequenceActivity(pl:LookupSequence("crouch_item1"))
		end

        -- Special view model animations detection brand spankin new
        if act == ACT_MP_ATTACK_STAND_PRIMARYFIRE or act == ACT_MP_ATTACK_CROUCH_PRIMARYFIRE then
            local viewModel = pl:GetViewModel()
            if IsValid(viewModel) then
                local currentSequence = viewModel:GetSequenceName(viewModel:GetSequence())
                
                -- Mega punch for critical swing
                if currentSequence == "bg_swing_crit" then
                    local sequence = pl:LookupSequence("vsh_attackstand_melee_megapunch")
                    if sequence and sequence > 0 then
                        local activity = pl:GetSequenceActivity(sequence)
                        if activity and activity > 0 then
                            return activity
                        end
                    end
                elseif pl:GetModel() == "models/bots/headless_hatman.mdl" then
                    -- Special animation for b_swing_b
                    if currentSequence == "b_swing_b" then
                        local sequence = pl:LookupSequence("boo")
                        if sequence and sequence > 0 then
                            local activity = pl:GetSequenceActivity(sequence)
                            if activity and activity > 0 then
                                return activity
                            end
                        end
                    -- Special animation for b_swing_c
                    elseif currentSequence == "b_swing_c" then
                        local sequence = pl:LookupSequence("gesture_melee_go")
                        if sequence and sequence > 0 then
                            local activity = pl:GetSequenceActivity(sequence)
                            if activity and activity > 0 then
                                return activity
                            end
                        end
                    end
                end
            end
        end
            
		if act == ACT_MP_ATTACK_STAND_PRIMARYFIRE then
            local holdtype = weapon:GetHoldType() or "normal"
            
            if holdtype == "melee2" then
                -- Special melee2 attack animation
                local sequence = pl:LookupSequence("attackstand_item1")
                if sequence and sequence > 0 then
                    local activity = pl:GetSequenceActivity(sequence)
                    if activity and activity > 0 then
                        return activity
                    end
                end
                return ACT_MP_ATTACK_STAND_MELEE
            else
                -- Play normal attack if not melee2
                local attacks = {
                    "attackstand_melee",
                    "attackstand_melee_l_rare",
                    "attackstand_melee_u",
                    "attackstand_melee_u2"
                }
                local chosenAnim = attacks[math.random(#attacks)]
                local sequence = pl:LookupSequence(chosenAnim)
                if sequence and sequence > 0 then
                    local activity = pl:GetSequenceActivity(sequence)
                    if activity and activity > 0 then
                        return activity
                    end
                end
                return ACT_MP_ATTACK_STAND_MELEE
            end
        end
        
        -- Crouch attack animations
        if act == ACT_MP_ATTACK_CROUCH_PRIMARYFIRE then
            local holdtype = weapon:GetHoldType() or "normal"
            
            if holdtype == "melee2" then
                -- Special melee2 crouch attack animation
                local sequence = pl:LookupSequence("attackcrouch_item1")
                if sequence and sequence > 0 then
                    local activity = pl:GetSequenceActivity(sequence)
                    if activity and activity > 0 then
                        return activity
                    end
                end
                return ACT_MP_ATTACK_CROUCH_MELEE
            else
                -- Normal crouch attacks
                local crouchAttacks = {
                    "attackcrouch_melee_u",
                    "ACT_MP_ATTACK_CROUCH_MELEE"
                }
                local chosenAnim = crouchAttacks[math.random(#crouchAttacks)]
                if chosenAnim == "ACT_MP_ATTACK_CROUCH_MELEE" then
                    return ACT_MP_ATTACK_CROUCH_MELEE
                else
                    local sequence = pl:LookupSequence(chosenAnim)
                    if sequence and sequence > 0 then
                        local activity = pl:GetSequenceActivity(sequence)
                        if activity and activity > 0 then
                            return activity
                        end
                    end
                end
                return ACT_MP_ATTACK_CROUCH_MELEE
            end
        end

        -- Additional animations
        ActivityTranslateFixTF2[ACT_MP_RELOAD_STAND] = ACT_MP_RELOAD_STAND_MELEE
        ActivityTranslateFixTF2[ACT_MP_RELOAD_CROUCH] = ACT_MP_RELOAD_CROUCH_MELEE
        ActivityTranslateFixTF2[ACT_MP_JUMP] = ACT_MP_JUMP_START_MELEE
        ActivityTranslateFixTF2[ACT_MP_SWIM] = ACT_MP_SWIM_MELEE
        ActivityTranslateFixTF2[ACT_MP_JUMP_START] = ACT_MP_JUMP_START_MELEE
        ActivityTranslateFixTF2[ACT_MP_JUMP_FLOAT] = ACT_MP_JUMP_FLOAT_MELEE
        ActivityTranslateFixTF2[ACT_LAND] = ACT_MP_JUMP_LAND_MELEE

        return ActivityTranslateFixTF2[act] or act
    end
end)

hook.Add("UpdateAnimation", "SaxtonHaleAnimations", function(pl, velocity, maxseqgroundspeed) --pitch and yaw rotation 
    if pl:GetModel() == "models/player/saxton_hale.mdl" 
    or pl:GetModel() == "models/vsh/player/santa_hale.mdl"
	or pl:GetModel() == "models/vsh/player/saxton_hale.mdl"
    or pl:GetModel() == "models/saxton_hale_3.mdl"
    or pl:GetModel() == "models/bots/headless_hatman.mdl"
    or pl:GetModel() == "models/vsh/player/winter/saxton_hale.mdl"
	or pl:GetModel() == "models/vip/player/julius/julius.mdl"
    or pl:GetModel() == "models/vsh/player/mecha_hale.mdl"
    or pl:GetModel() == "models/subzero_saxton_hale.mdl" 
    or pl:GetModel() == "models/vsh/player/hell_hale.mdl" then

        local pitch = math.Clamp(math.NormalizeAngle(-pl:EyeAngles().p), -45, 90)
        local pitch2 = math.Clamp(math.NormalizeAngle(-pl:EyeAngles().p), -1, 1)
        pl:SetPoseParameter("body_pitch", pitch)
        pl:SetPoseParameter("head_pitch", pitch2)
        
        if not pl.PlayerBodyYaw or not pl.TargetBodyYaw then
            pl.TargetBodyYaw = pl:EyeAngles().y
            pl.PlayerBodyYaw = pl.TargetBodyYaw
        end
        
        local diff = pl.PlayerBodyYaw - pl:EyeAngles().y
        local yaw = pl.PlayerBodyYaw - pl:EyeAngles().y
        
        if velocity:Length2D() > 0.5 or diff > 45 or diff < -45 then
            pl.TargetBodyYaw = pl:EyeAngles().y
        end
            
        local d = pl.TargetBodyYaw - pl.PlayerBodyYaw
        if d > 180 then
            pl.PlayerBodyYaw = math.NormalizeAngle(Lerp(0.2, pl.PlayerBodyYaw+360, pl.TargetBodyYaw))
        elseif d < -180 then
            pl.PlayerBodyYaw = math.NormalizeAngle(Lerp(0.2, pl.PlayerBodyYaw-360, pl.TargetBodyYaw))
        else
            pl.PlayerBodyYaw = Lerp(0.2, pl.PlayerBodyYaw, pl.TargetBodyYaw)
        end
        
        pl:SetPoseParameter("body_yaw", yaw)
        if CLIENT then
            pl:SetRenderAngles(Angle(0, pl.PlayerBodyYaw, 0))
        end
    else
        return GAMEMODE:UpdateAnimation(pl, velocity, maxseqgroundspeed)
    end
end)
